<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAT II/III ì‹¤ì  ê´€ë¦¬ ì‹œìŠ¤í…œ | PARATA AIR</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --bg-dark: #0f172a; --primary: #3b82f6; --accent: #00f2ff;
            --card-border: rgba(255, 255, 255, 0.08); --text-dim: #94a3b8;
            --color-important: #ff4757;
        }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--bg-dark); color: #f8fafc; line-height: 1.6; }
        
        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tab-active { border-bottom: 4px solid var(--primary); color: var(--primary); font-weight: 700; }
        .tab-inactive { color: var(--text-dim); }
        .tab-inactive:hover { color: #fff; }

        .chart-container { position: relative; width: 100%; height: 200px; }

        /* ì¶œë ¥ ìŠ¤íƒ€ì¼ */
        @media print {
            .no-print { display: none !important; }
            #printable-area, #printable-area * { visibility: visible; }
            body { background: white; color: black; padding: 0; }
            .bg-slate-800, .bg-slate-900 { background: #f8fafc !important; color: black; border: 1px solid #ddd; }
            .text-white, .text-slate-400, .text-blue-400 { color: black !important; }
        }

        #landingCanvas { background: #000; border-radius: 2rem; box-shadow: 0 30px 60px rgba(0,0,0,0.8); }
        
        input, select, textarea { background: rgba(255,255,255,0.05); border: 1px solid var(--card-border); color: #fff; outline: none; transition: 0.3s; }
        input:focus, select:focus { border-color: var(--primary); background: rgba(255,255,255,0.1); }

        #auth-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.98); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* ì§€ì¹¨ ì„¹ì…˜ ì¹´ë“œ ìŠ¤íƒ€ì¼ (í‰ë©´í˜•) */
        .compliance-card { background: rgba(255,255,255,0.03); border: 1px solid var(--card-border); border-radius: 24px; padding: 30px; height: 100%; transition: 0.3s; }
        .compliance-card h3 { color: var(--accent); font-family: 'Montserrat'; font-weight: 900; font-size: 1.1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid var(--card-border); padding-bottom: 12px; }
        
        .comp-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; margin: 10px 0; }
        .comp-table th { background: rgba(255,255,255,0.05); color: #94a3b8; padding: 10px; border: 1px solid var(--card-border); text-align: center; }
        .comp-table td { padding: 10px; border: 1px solid var(--card-border); color: #e2e8f0; }

        .theory-box { background: rgba(59, 130, 246, 0.05); border-left: 4px solid var(--primary); padding: 20px; border-radius: 0 15px 15px 0; margin-bottom: 20px; }
    </style>
</head>
<body>

    <!-- ë°ì´í„° ì—°ê²° ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div id="auth-overlay" class="no-print">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"></div>
        <p id="loading-text" class="text-slate-400 font-bold text-center">
            PARATA AIR ë°ì´í„° ì„¼í„° ë™ê¸°í™” ì¤‘...<br>
            <span class="text-[10px] font-normal text-slate-500 mt-2 block tracking-widest uppercase italic">Syncing Cloud Ledger</span>
        </p>
    </div>

    <!-- Header Navigation -->
    <nav class="fixed top-0 w-full h-[75px] z-[1000] bg-white border-b border-slate-200 flex justify-between items-center px-[5%] no-print">
        <a href="index.html" class="flex items-center gap-3 text-slate-900 no-underline">
            <img src="ci.png" alt="Logo" class="h-8">
            <div class="border-l border-slate-300 pl-3 leading-tight">
                <b class="font-black text-xs font-[Montserrat] uppercase tracking-tighter">Flight Operation<br>Engineering</b>
            </div>
        </a>
        <div class="flex gap-8 h-full items-center font-bold text-[12px] uppercase tracking-wider text-slate-500">
            <button onclick="switchTab('intro')" id="nav-intro" class="tab-active py-2">Intro</button>
            <button onclick="switchTab('compliance')" id="nav-compliance" class="tab-inactive py-2">Compliance</button>
            <button onclick="switchTab('plan')" id="nav-plan" class="tab-inactive py-2">Plan</button>
            <button onclick="switchTab('data')" id="nav-data" class="tab-inactive py-2 text-blue-600">Performance Log</button>
        </div>
    </nav>

    <main class="mt-[110px] max-w-[1400px] mx-auto px-6 pb-24">

        <!-- ================= SECTION 1: INTRO (ë³´ê°•ëœ ìƒì„¸ ì´ë¡ ) ================= -->
        <section id="section-intro" class="space-y-12 fade-in">
            <!-- ë©”ì¸ ë°°ë„ˆ ë° ì‹œë®¬ë ˆì´í„° -->
            <div class="bg-slate-800/40 rounded-[3rem] p-12 border border-white/5 shadow-2xl relative overflow-hidden">
                <div class="grid lg:grid-cols-2 gap-16 items-center relative z-10">
                    <div class="space-y-8">
                        <div>
                            <span class="inline-block px-4 py-1.5 bg-blue-600 text-white rounded-full text-[10px] font-black uppercase tracking-[3px] mb-6 shadow-xl shadow-blue-500/30">Aviation Technology Guide</span>
                            <h2 class="text-5xl font-black text-white mb-6 font-[Montserrat] leading-tight">Precision Approach:<br><span class="text-blue-500">CAT II/III </span></h2>
                            <p class="text-slate-400 leading-relaxed text-lg">
                                ì €ì‹œì • ìƒí™©ì—ì„œ ì•ˆì „í•œ ì°©ë¥™ì„ ë³´ì¥í•˜ëŠ” **ILS(Instrument Landing System)** ê¸°ìˆ ê³¼ ë“±ê¸‰ë³„ ìš´ì˜ ì°¨ì´
                            </p>
                        </div>

                        <div class="theory-box">
                            <h4 class="font-black text-white mb-2 text-lg italic underline decoration-blue-500">ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€ìš”?</h4>
                            <p class="text-sm text-slate-400">ì¼ë°˜ì ì¸ ì°©ë¥™(CAT-I)ì€ ì¡°ì¢…ì‚¬ê°€ í™œì£¼ë¡œë¥¼ ì§ì ‘ ë³´ê³  ë‚´ë¦¬ëŠ” ë¹„ì¤‘ì´ í¬ì§€ë§Œ, **CAT-II/III**ëŠ” í•­ê³µê¸°ì˜ ìë™ ì‹œìŠ¤í…œê³¼ ì§€ìƒ ì „íŒŒ ì‹ í˜¸ì— ì „ì ìœ¼ë¡œ ì˜ì¡´í•©ë‹ˆë‹¤. ì‹œê³„ê°€ ê±°ì˜ ì œë¡œì— ê°€ê¹Œìš´ ì•ˆê°œ ì†ì—ì„œë„ ì•ˆì „í•œ ì ‘ì§€ë¥¼ ê°€ëŠ¥ì¼€ í•˜ëŠ” ê³ ë„ì˜ ê³µí•™ì  ê²°í•©ì…ë‹ˆë‹¤.</p>
                        </div>

                        <div class="grid grid-cols-2 gap-6">
                            <div class="bg-white/5 p-5 rounded-3xl border border-white/5">
                                <h4 class="font-bold text-blue-400 text-sm font-[Montserrat]">Decision Height (DH)</h4>
                                <p class="text-[11px] text-slate-500 mt-2">ì¡°ì¢…ì‚¬ê°€ ìœ¡ì•ˆìœ¼ë¡œ í™œì£¼ë¡œ ë“±í™” ë“±ì„ í™•ì¸í•˜ê³  "ì°©ë¥™(Land)" í˜¹ì€ "ë³µí–‰(Go-around)"ì„ ìµœì¢… ê²°ì •í•´ì•¼ í•˜ëŠ” ì„ê³„ ê³ ë„ì…ë‹ˆë‹¤.</p>
                            </div>
                            <div class="bg-white/5 p-5 rounded-3xl border border-white/5">
                                <h4 class="font-bold text-blue-400 text-sm font-[Montserrat]">Runway Visual Range (RVR)</h4>
                                <p class="text-[11px] text-slate-500 mt-2">í™œì£¼ë¡œ ìƒì—ì„œ ì¡°ì¢…ì‚¬ê°€ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìˆ˜í‰ ê°€ì‹œê±°ë¦¬ì…ë‹ˆë‹¤. ë“±ê¸‰ì´ ì˜¬ë¼ê°ˆìˆ˜ë¡ í•„ìš”í•œ ê°€ì‹œê±°ë¦¬ëŠ” ì§§ì•„ì§‘ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col gap-6">
                        <canvas id="landingCanvas" class="h-[400px] w-full"></canvas>
                        <div class="flex justify-between bg-black/50 p-3 rounded-2xl border border-white/10 no-print backdrop-blur-xl">
                            <button onclick="setVisual(1)" class="flex-1 py-3 text-[11px] font-black text-white hover:bg-white/5 rounded-xl transition">CAT I</button>
                            <button onclick="setVisual(2)" class="flex-1 py-3 text-[11px] font-black text-blue-400 hover:bg-white/5 rounded-xl transition">CAT II</button>
                            <button onclick="setVisual(3)" class="flex-1 py-3 text-[11px] font-black text-indigo-400 hover:bg-white/5 rounded-xl transition">CAT III</button>
                        </div>
                        <p id="visualizer-status" class="text-center text-[11px] font-black uppercase tracking-[5px] text-blue-500 italic">CAT I APPROACH (Normal Visibility)</p>
                    </div>
                </div>
            </div>

            <!-- ILS êµ¬ì„± ë° ë“±ê¸‰ ìš”ì•½ ì¹´ë“œ -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- LOC -->
                <div class="compliance-card">
                    <h3>ğŸ“¡ Localizer (ë°©ìœ„ê°)</h3>
                    <p class="text-xs text-slate-400 mb-4">í™œì£¼ë¡œ ì¤‘ì‹¬ì„ ì„ ìœ ë„í•©ë‹ˆë‹¤. í•­ê³µê¸°ê°€ ì¢Œìš°ë¡œ ì¹˜ìš°ì¹˜ì§€ ì•Šê²Œ ì „íŒŒ ë¹”ì„ ì˜ì•„ ì •ë ¬ì„ ë•ìŠµë‹ˆë‹¤.</p>
                    <div class="text-[10px] text-blue-500 font-bold font-mono">FREQ: 108.1 ~ 111.95 MHz</div>
                </div>
                <!-- GS -->
                <div class="compliance-card">
                    <h3>ğŸ“ Glide Slope (í™œê³µê°)</h3>
                    <p class="text-xs text-slate-400 mb-4">ì•ˆì „í•œ í•˜ê°• ê²½ë¡œ(ì•½ 3ë„)ë¥¼ ìœ ë„í•©ë‹ˆë‹¤. ì§€í˜•ë¬¼ì— ë¶€ë”ªíˆì§€ ì•Šê³  ì ‘ì§€êµ¬ì—­ì— ë„ë‹¬í•˜ê²Œ í•©ë‹ˆë‹¤.</p>
                    <div class="text-[10px] text-indigo-500 font-bold font-mono">UHF BAND OPERATION</div>
                </div>
                <!-- Marker -->
                <div class="compliance-card">
                    <h3>ğŸ“ Marker / DME</h3>
                    <p class="text-xs text-slate-400 mb-4">í™œì£¼ë¡œê¹Œì§€ ë‚¨ì€ ê±°ë¦¬ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤. ì¡°ì¢…ì‚¬ëŠ” ì´ë¥¼ í†µí•´ ì ‘ê·¼ ì§„í–‰ ìƒí™©ì„ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.</p>
                    <div class="text-[10px] text-accent font-bold font-mono">DISTANCE CHECKPOINT</div>
                </div>
                <!-- Criteria -->
                <div class="compliance-card bg-blue-600/10 border-blue-500/20">
                    <h3>ğŸ¯ ë“±ê¸‰ë³„ ì¸ê°€ ê¸°ì¤€</h3>
                    <ul class="text-[10px] space-y-2 text-slate-300">
                        <li class="flex justify-between"><span>CAT-I:</span> <b class="text-white">DH 200ft / RVR 550m</b></li>
                        <li class="flex justify-between"><span>CAT-II:</span> <b class="text-blue-400">DH 100ft / RVR 300m</b></li>
                        <li class="flex justify-between"><span>CAT-IIIa:</span> <b class="text-indigo-400">DH 50ft / RVR 175m</b></li>
                        <li class="flex justify-between"><span>CAT-IIIb:</span> <b class="text-accent">No DH / RVR 50m</b></li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- ================= SECTION 2: COMPLIANCE (í‰ë©´í˜• ìƒì„¸ í˜ì´ì§€) ================= -->
        <section id="section-compliance" class="hidden space-y-8 fade-in">
            <div class="text-center mb-10">
                <h2 class="text-4xl font-black font-[Montserrat] tracking-tighter text-white">SYSTEM COMPLIANCE GUIDE</h2>
                <p class="text-blue-500 font-bold text-sm tracking-[5px] uppercase mt-2">ì •ë°€ì ‘ê·¼ê³„ê¸°ë¹„í–‰ ìš´ìš©ì§€ì¹¨ ì „ì²´ ìš”ì•½</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- 1. ìš´í•­ ì¹´í…Œê³ ë¦¬ ì •ì˜ -->
                <div class="compliance-card lg:col-span-2">
                    <h3>01. ìš´í•­ ì¹´í…Œê³ ë¦¬ ì •ì˜</h3>
                    <table class="comp-table">
                        <thead><tr><th>êµ¬ë¶„</th><th>ê²°ì‹¬ê³ ë„ (DH)</th><th>í™œì£¼ë¡œê°€ì‹œë²”ìœ„ (RVR)</th></tr></thead>
                        <tbody class="text-center">
                            <tr><td class="font-bold text-white uppercase">CAT-I</td><td>60m(200ft) ì´ìƒ</td><td>550m(1,800ft) ì´ìƒ</td></tr>
                            <tr class="bg-blue-500/5 text-blue-400"><td class="font-bold uppercase">CAT-II</td><td>30m~60m(100~200ft)</td><td>300m(1,000ft) ì´ìƒ</td></tr>
                            <tr class="bg-indigo-500/5 text-accent"><td class="font-bold uppercase">CAT-III</td><td>30m ë¯¸ë§Œ ë˜ëŠ” ì—†ìŒ</td><td>300m ë¯¸ë§Œ ë˜ëŠ” ì œí•œì—†ìŒ</td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 8. í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½ -->
                <div class="compliance-card bg-blue-600/10 border-2 border-blue-500/30">
                    <h3>08. í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½</h3>
                    <ul class="text-[11px] space-y-3 mt-4">
                        <li class="flex justify-between border-b border-white/5 pb-1"><span>CAT-II ì‹œë²”</span><b class="text-blue-400">6ê°œì›”/100íšŒ/ì„±ê³µë¥  85%</b></li>
                        <li class="flex justify-between border-b border-white/5 pb-1"><span>CAT-III ì‹œë²”</span><b class="text-accent">6ê°œì›”/100íšŒ/ì„±ê³µë¥  95%</b></li>
                        <li class="flex justify-between border-b border-white/5 pb-1"><span>ê¸°ì¥ ìê²©</span><b>JET 300H / í•´ë‹¹ê¸°ì¢… 100H</b></li>
                        <li class="flex justify-between"><span>ì‹œìŠ¤í…œ í‰ê°€ì£¼ê¸°</span><b>III: 30ì¼ / II: 6ê°œì›”</b></li>
                    </ul>
                </div>

                <!-- 2. ìŠ¹ì¸ ìš”ê±´ 4ëŒ€ ë¶„ì•¼ -->
                <div class="compliance-card lg:col-span-3">
                    <h3>02. ìŠ¹ì¸ ìš”ê±´ 4ëŒ€ ë¶„ì•¼</h3>
                    <div class="grid md:grid-cols-4 gap-6 mt-4">
                        <div class="bg-white/5 p-4 rounded-2xl">
                            <p class="text-blue-400 font-bold text-xs mb-3">â‘  í•­ê³µê¸° ì¥ë¹„</p>
                            <p class="text-[11px] text-slate-400">ë…ë¦½ í•­í–‰ìˆ˜ì‹ ê¸° 2ì¡°, ìë™ì°©ë¥™ì¥ì¹˜(Fail-Passive/Operational), ë¡¤ì•„ì›ƒ ì‹œìŠ¤í…œ, ì „íŒŒê³ ë„ê³„ 2ì¡°, ë¯¸ë„ëŸ¼ë°©ì§€ì¥ì¹˜</p>
                        </div>
                        <div class="bg-white/5 p-4 rounded-2xl">
                            <p class="text-indigo-400 font-bold text-xs mb-3">â‘¡ ì •ë¹„ í”„ë¡œê·¸ë¨</p>
                            <p class="text-[11px] text-slate-400">ì €ì‹œì •ìš´í•­ ì •ë¹„ì ˆì°¨ ìˆ˜ë¦½, ì£¼ê¸°ì  í‰ê°€(30ì¼/6ê°œì›”), ì‹œí—˜ì¥ë¹„ ê²€êµì •, ì‹ ë¢°ì„± ë³´ê³ ì²´ê³„ êµ¬ì¶•</p>
                        </div>
                        <div class="bg-white/5 p-4 rounded-2xl">
                            <p class="text-accent font-bold text-xs mb-3">â‘¢ ìš´í•­ìŠ¹ë¬´ì› í›ˆë ¨</p>
                            <p class="text-[11px] text-slate-400">ì§€ìƒí›ˆë ¨(ì‹œì„¤/ì¥ë¹„), ë¹„í–‰í›ˆë ¨(ëª¨ì˜ì¥ì¹˜), ì—°1íšŒ ì •ê¸°ì‹¬ì‚¬, ìê²©ìœ ì§€(ìë™ì°©ë¥™ ì—°1íšŒ / 90ì¼ 1íšŒ ê²½í—˜)</p>
                        </div>
                        <div class="bg-white/5 p-4 rounded-2xl">
                            <p class="text-white font-bold text-xs mb-3">â‘£ ìš´í•­ì ˆì°¨</p>
                            <p class="text-[11px] text-slate-400">ìŠ¹ë¬´ì› í˜‘ë™ ë° ëª¨ë‹ˆí„°ë§, DH/AH ì‚¬ìš©ê¸°ì¤€, Call-out ì ˆì°¨, ë¹„ì •ìƒìƒí™© ëŒ€ì‘, ì €ì‹œì • ì§€ìƒí™œì£¼(Taxi) ì ˆì°¨</p>
                        </div>
                    </div>
                </div>

                <!-- 3. ìŠ¹ì¸ ì ˆì°¨ -->
                <div class="compliance-card">
                    <h3>03. ìŠ¹ì¸ ì ˆì°¨</h3>
                    <div class="space-y-4 text-[11px]">
                        <p>â— <b>CAT-I:</b> ë³„ë„ ìŠ¹ì¸ ë¶ˆí•„ìš”</p>
                        <p>â— <b>CAT-II:</b> ì‹ ì²­ â†’ ì„œë¥˜ì‹¬ì‚¬ â†’ ì‹œë²”ìš´í•­(100íšŒ) â†’ ìŠ¹ì¸ (ì„±ê³µë¥  85% ì´ìƒ ì‹œ DH 30m í•˜í–¥)</p>
                        <p>â— <b>CAT-III:</b> ì‹ ì²­ â†’ ì‹œë²”ìš´í•­(100íšŒ) â†’ ë‹¨ê³„ì  ìŠ¹ì¸ (ì„±ê³µë¥  95% ì´ìƒ ë° RVR 75m ë‹¨ê³„ì  í•˜í–¥)</p>
                    </div>
                </div>

                <!-- 4. ë¹„í–‰ì¥ ì‹œì„¤ ìš”ê±´ -->
                <div class="compliance-card">
                    <h3>04. ë¹„í–‰ì¥ ì‹œì„¤ ìš”ê±´</h3>
                    <ul class="text-[11px] text-slate-400 space-y-2 list-disc ml-4">
                        <li>CAT-II/III ì í•© ILS/MLS ì‹œì„¤</li>
                        <li>ê³ ê´‘ë„ ë“±í™”(ì ‘ê·¼/ì ‘ì§€ëŒ€/ì¤‘ì‹¬ì„ )</li>
                        <li>RVR ì¸¡ì • ë° ì˜ˆë³´ ì‹œìŠ¤í…œ</li>
                        <li>ILS ì„ê³„ì§€ì—­ ë° ì¥ì• ë¬¼íšŒí”¼êµ¬ì—­ ë³´í˜¸</li>
                        <li>CAT-II/III ì í•© ê´€ì œì„œë¹„ìŠ¤(ATC)</li>
                    </ul>
                </div>

                <!-- 5. ìš´í•­ ì œí•œì‚¬í•­ -->
                <div class="compliance-card">
                    <h3>05. ìš´í•­ ì œí•œì‚¬í•­</h3>
                    <ul class="text-[11px] text-slate-400 space-y-2 list-disc ml-4">
                        <li>ì¸¡í’: AFM ì œí•œì¹˜ ë˜ëŠ” 15kt ì´í•˜</li>
                        <li>í™œì£¼ë¡œ ìƒíƒœ: ì œë™ë§ˆì°°ê³„ìˆ˜ ì–‘í˜¸ í•„ìˆ˜</li>
                        <li>RVR ë³´ê³ : TDZ í•„ìˆ˜, Mid/Rollout ì¡°ê±´ë¶€</li>
                        <li>ì§€ìƒì´ë™: SMGCS ì ˆì°¨ ì¤€ìˆ˜</li>
                    </ul>
                </div>

                <!-- 6~7. ë³´ê³  ì˜ë¬´ ë° ì‹¤íŒ¨ì ‘ê·¼ -->
                <div class="compliance-card lg:col-span-2">
                    <h3>06-07. ë³´ê³  ì˜ë¬´ ë° ì‹¤íŒ¨ì ‘ê·¼ í•„ìˆ˜ ìƒí™©</h3>
                    <div class="grid grid-cols-2 gap-6 mt-2 text-[11px]">
                        <div>
                            <p class="text-amber-400 font-bold mb-2">ë³´ê³  ì˜ë¬´ (ìŠ¹ì¸ í›„ 1ë…„)</p>
                            <p class="text-slate-400 leading-relaxed">ë§¤ì›” ìš´í•­ íšŸìˆ˜/ì„±ê³µ/ì‹¤íŒ¨ ë¶„ì„, ì¥ë¹„ ê²°í•¨ í˜„í™©, 100ft ì´í•˜ ë¹„ì •ìƒ ìƒí™© ë³´ê³ </p>
                        </div>
                        <div>
                            <p class="text-red-500 font-bold mb-2">ì‹¤íŒ¨ì ‘ê·¼(Go-around) í•„ìˆ˜</p>
                            <p class="text-slate-400 leading-relaxed">DHì—ì„œ ì‹œê³„ ë¯¸í™•ë³´, í•„ìˆ˜ì¥ë¹„ ê³ ì¥/ì—°ê²°í•´ì œ, ì§€ìƒì‹œì„¤ ë¶€ì‘ë™, ì¸¡í’ ì´ˆê³¼</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================= SECTION 3: PLAN ================= -->
        <section id="section-plan" class="hidden space-y-8 fade-in">
            <div class="bg-slate-800/40 rounded-3xl p-8 border border-white/5 border-l-[10px] border-l-blue-600">
                <h2 class="text-2xl font-black text-white font-[Montserrat] uppercase italic">Operational Approval Roadmap</h2>
                <div class="mt-4 space-y-3 text-slate-300 font-medium text-sm">
                    <p>â— 6ê°œì›”ê°„ CAT-II ì‹œë²” Auto Landing 100íšŒ ì‹¤ì‹œ - CAT-II ìš´í•­ ìŠ¹ì¸ í›„</p>
                    <p>â— ì´ì–´ì„œ 3ê°œì›”ê°„ CAT-III ì‹œë²” Auto Landing 50íšŒ ì‹¤ì‹œí›„ CAT-III ìŠ¹ì¸</p>
                </div>
            </div>
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="bg-slate-800/40 p-10 rounded-[2.5rem] border border-white/5">
                    <h3 class="font-bold mb-6 text-blue-400 border-b border-white/5 pb-3 italic text-sm font-[Montserrat]">Required Documents</h3>
                    <div id="doc-checklist-container" class="space-y-2"></div>
                </div>
                <div class="bg-slate-900 p-10 rounded-[2.5rem] border border-white/5 shadow-2xl">
                    <h3 class="font-bold mb-8 italic text-white/40 tracking-widest text-xs font-[Montserrat]">MILESTONES</h3>
                    <div class="space-y-12 relative pl-8">
                        <div class="absolute left-3 top-2 bottom-2 w-px bg-white/10"></div>
                        <div class="relative"><div class="absolute -left-8 w-4 h-4 rounded-full bg-blue-500 border-4 border-slate-900 shadow-[0_0_20px_rgba(59,130,246,0.6)]"></div><p class="text-sm font-bold uppercase tracking-widest">Phase 1: CAT-II Trial (6M)</p><p class="text-xs text-slate-500 mt-2 font-mono uppercase tracking-tighter">100 Successive Auto Landings</p></div>
                        <div class="relative"><div class="absolute -left-8 w-4 h-4 rounded-full bg-indigo-500 border-4 border-slate-900 shadow-[0_0_20px_rgba(99,102,241,0.6)]"></div><p class="text-sm font-bold uppercase tracking-widest">Phase 2: CAT-III Trial (3M)</p><p class="text-xs text-slate-500 mt-2 font-mono uppercase tracking-tighter">50 Successive Auto Landings</p></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================= SECTION 4: DATA LOG ================= -->
        <section id="section-data" class="hidden space-y-6 fade-in">
            <div class="bg-slate-900/60 rounded-[2rem] p-8 border border-white/10 flex justify-between items-center no-print">
                <h2 class="text-2xl font-black italic tracking-tighter font-[Montserrat]">LANDING PERFORMANCE DATA LEDGER</h2>
                <div class="flex gap-3">
                    <button onclick="exportToWord()" class="px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl text-xs font-black transition-all shadow-xl shadow-blue-500/20">WORD EXPORT</button>
                    <button onclick="window.print()" class="px-6 py-3 bg-white/5 hover:bg-white/10 rounded-2xl text-xs font-black border border-white/10 transition-all">PRINT</button>
                </div>
            </div>

            <div class="grid lg:grid-cols-12 gap-10">
                <!-- FORM -->
                <div class="lg:col-span-4 space-y-6 no-print">
                    <div class="bg-slate-800/40 p-8 rounded-[2.5rem] border border-white/5 shadow-2xl">
                        <h3 class="font-black text-blue-400 mb-8 flex justify-between items-center italic text-xs tracking-widest">
                            <span>+ RECORD NEW LOG</span>
                            <span id="user-display" class="text-[8px] bg-blue-500/10 px-3 py-1 rounded-full text-blue-400 not-italic uppercase font-mono">Syncing...</span>
                        </h3>
                        <form id="landing-form" class="space-y-5">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="col-span-2"><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Flight Date</label><input type="date" id="input-date" required class="w-full p-4 rounded-2xl text-xs"></div>
                                <div><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Airport</label><input type="text" id="input-airport" placeholder="RKSI" required class="w-full p-4 rounded-2xl text-xs uppercase font-mono tracking-tighter"></div>
                                <div><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Runway</label><input type="text" id="input-rwy" placeholder="33R" required class="w-full p-4 rounded-2xl text-xs uppercase font-mono"></div>
                                <div><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">A/C Type</label><input type="text" id="input-type" placeholder="B787-9" required class="w-full p-4 rounded-2xl text-xs font-mono tracking-tighter"></div>
                                <div><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Reg. No</label><input type="text" id="input-reg" placeholder="HL8080" required class="w-full p-4 rounded-2xl text-xs uppercase font-mono tracking-tighter"></div>
                                <div class="col-span-2"><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">WX Condition</label><input type="text" id="input-wx" placeholder="RVR 350m / Fog" required class="w-full p-4 rounded-2xl text-xs"></div>
                                <div><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Captain</label><input type="text" id="input-capt" placeholder="Name" required class="w-full p-4 rounded-2xl text-xs"></div>
                                <div><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">First Officer</label><input type="text" id="input-fo" placeholder="Name" required class="w-full p-4 rounded-2xl text-xs"></div>
                                <div class="col-span-2"><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Approach CAT</label><select id="input-cat" class="w-full p-4 rounded-2xl text-xs appearance-none font-bold"><option value="CAT-II">CAT-II (6M Trial)</option><option value="CAT-III">CAT-III (3M Trial)</option></select></div>
                                <div class="col-span-2"><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1">Autoland Quality</label><select id="input-satisfy" class="w-full p-4 rounded-2xl text-xs appearance-none font-bold"><option value="Satisfactory">Satisfactory (ë§Œì¡±)</option><option value="Non-Satisfactory">Non-Satisfactory (ë¶ˆë§Œì¡±)</option></select></div>
                                <div class="col-span-2 pt-4"><button type="submit" class="w-full py-5 bg-blue-600 text-white rounded-[1.5rem] font-black shadow-2xl active:scale-95 transition-all uppercase italic text-xs tracking-[3px]">Send to Cloud</button></div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- TABLE & CHARTS -->
                <div class="lg:col-span-8 space-y-10">
                    <div class="bg-slate-800/20 p-10 rounded-[3rem] border border-white/5 flex justify-around items-center no-print backdrop-blur-md shadow-2xl">
                        <div class="text-center w-1/2">
                            <div class="chart-container mx-auto"><canvas id="chart-cat2"></canvas></div>
                            <p class="text-[10px] font-black text-slate-500 mt-6 uppercase tracking-[3px] font-mono">CAT-II Progress: <span id="stat-cat2" class="text-blue-400">0</span> / 100</p>
                        </div>
                        <div class="text-center w-1/2 border-l border-white/5">
                            <div class="chart-container mx-auto"><canvas id="chart-cat3"></canvas></div>
                            <p class="text-[10px] font-black text-slate-500 mt-6 uppercase tracking-[3px] font-mono">CAT-III Progress: <span id="stat-cat3" class="text-indigo-400">0</span> / 50</p>
                        </div>
                    </div>

                    <div id="printable-area" class="bg-slate-800/40 rounded-[2.5rem] border border-white/5 overflow-hidden shadow-2xl">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-white/5">
                                <thead class="bg-white/5 font-[Montserrat]">
                                    <tr class="text-[8px] text-slate-500 font-black uppercase tracking-widest">
                                        <th class="px-8 py-5 text-left">Date / Airport</th>
                                        <th class="px-8 py-5 text-left">A/C Info</th>
                                        <th class="px-8 py-5 text-left">WX / Status</th>
                                        <th class="px-8 py-5 text-left">Crew Info</th>
                                        <th class="px-8 py-5 text-right no-print">Act</th>
                                    </tr>
                                </thead>
                                <tbody id="landing-table-body" class="divide-y divide-white/5 text-[10px]"></tbody>
                            </table>
                            <div id="empty-state" class="p-20 text-center text-slate-600 italic text-xs tracking-widest uppercase">Syncing with server...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="py-16 text-center border-t border-white/5 no-print">
        <b class="text-white/40 tracking-[15px] font-black italic text-xl uppercase font-[Montserrat]">PARATA AIR</b>
        <p class="text-slate-600 text-[10px] mt-4 uppercase tracking-[5px] font-bold">Flight Operations Intelligence â€¢ Approval Tracker</p>
    </footer>

    <!-- Firebase SDK (RTDB Version) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
        import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyBb8ruxrJa-Fw4s5bwy_10TeH6_TgOhnz4",
            authDomain: "parataoe-769bb.firebaseapp.com",
            databaseURL: "https://parataoe-769bb-default-rtdb.firebaseio.com/",
            projectId: "parataoe-769bb",
            storageBucket: "parataoe-769bb.firebasestorage.app",
            messagingSenderId: "964545748384",
            appId: "1:964545748384:web:f882221099022e4271d8c5",
            measurementId: "G-5LJ4QR4XED"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const landingsRef = ref(db, 'cat_landings');

        const state = { landings: [], charts: { cat2: null, cat3: null }, visualMode: 1, currentTab: 'intro' };

        const DOCS = [
            {n: "ì‹œë²”ìš´í•­ ìŠ¹ì¸ì‹ ì²­ì„œ", d: "ê³µí†µ"}, {n: "êµìœ¡í›ˆë ¨ê²°ê³¼", d: "ì¸ì‚¬/í›ˆë ¨"},
            {n: "í•„ìš”ì¥ë¹„ í˜„í™© / Cert Doc", d: "ìš´í•­ê¸°ìˆ íŒ€"}, {n: "ìš´í•­ê·œì • (OM)", d: "í‘œì¤€ì‹¬ì‚¬íŒ€"},
            {n: "í›ˆë ¨êµë²” (TM)", d: "í›ˆë ¨íŒ€"}, {n: "ìš´í•­ê´€ë¦¬ì‚¬ í›ˆë ¨êµë²”", d: "ìš´í•­í†µì œì‹¤"},
            {n: "ì •ë¹„ê·œì •", d: "ì •ë¹„ê¸°ìˆ íŒ€"}, {n: "ì •ë¹„í”„ë¡œê·¸ë¨", d: "í’ˆì§ˆë³´ì¦íŒ€"}
        ];

        onValue(landingsRef, (snap) => {
            const data = snap.val();
            const overlay = document.getElementById('auth-overlay'); if (overlay) overlay.style.display = 'none';
            const userDisp = document.getElementById('user-display'); if (userDisp) userDisp.innerText = `CLOUD SYNC: ACTIVE`;
            
            if (data) {
                state.landings = Object.keys(data).map(key => ({ id: key, ...data[key] })).sort((a,b) => new Date(b.date) - new Date(a.date));
                const es = document.getElementById('empty-state'); if(es) es.style.display = 'none';
            } else {
                state.landings = [];
                const es = document.getElementById('empty-state'); if(es) { es.style.display = 'block'; es.innerText = 'ì‹¤ì  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.'; }
            }
            renderTable(); updateCharts();
        });

        document.getElementById('landing-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const newData = {
                date: document.getElementById('input-date').value,
                airport: document.getElementById('input-airport').value.toUpperCase(),
                runway: document.getElementById('input-rwy').value.toUpperCase(),
                type: document.getElementById('input-type').value,
                reg: document.getElementById('input-reg').value.toUpperCase(),
                wx: document.getElementById('input-wx').value,
                capt: document.getElementById('input-capt').value,
                fo: document.getElementById('input-fo').value,
                cat: document.getElementById('input-cat').value,
                satisfy: document.getElementById('input-satisfy').value,
                count: 1
            };
            push(landingsRef, newData); e.target.reset();
            const di = document.getElementById('input-date'); if(di) di.valueAsDate = new Date();
        });

        window.deleteEntry = (id) => { if(confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) remove(ref(db, 'cat_landings/' + id)); };

        function renderTable() {
            const tbody = document.getElementById('landing-table-body'); if(!tbody) return;
            tbody.innerHTML = state.landings.map(l => `
                <tr class="hover:bg-white/[0.03] transition-all font-sans">
                    <td class="px-8 py-5 font-mono font-bold text-white leading-tight">
                        <div>${l.date}</div>
                        <div class="text-[8px] text-blue-400 font-black tracking-widest uppercase">${l.airport} / ${l.runway}</div>
                    </td>
                    <td class="px-8 py-5">
                        <div class="font-bold text-slate-300 font-mono tracking-tighter">${l.type}</div>
                        <div class="text-[9px] text-slate-500 font-black uppercase font-mono tracking-tighter">${l.reg}</div>
                    </td>
                    <td class="px-8 py-5">
                        <div class="text-[9px] font-bold text-slate-400 truncate max-w-[120px] mb-1">${l.wx}</div>
                        <span class="px-2 py-0.5 rounded text-[7px] font-black ${l.satisfy === 'Satisfactory' ? 'bg-emerald-500/20 text-emerald-400' : 'bg-rose-500/20 text-rose-400'} uppercase tracking-widest inline-block shadow-sm">${l.satisfy}</span>
                    </td>
                    <td class="px-8 py-5 text-[9px] text-slate-400 leading-tight">
                        <div class="mb-1 italic">C: <span class="text-slate-200 font-medium not-italic">${l.capt}</span></div>
                        <div class="italic">F: <span class="text-slate-200 font-medium not-italic">${l.fo}</span></div>
                        <div class="mt-2 font-black text-blue-500 text-[8px] uppercase tracking-widest">${l.cat}</div>
                    </td>
                    <td class="px-8 py-5 text-right no-print">
                        <button onclick="deleteEntry('${l.id}')" class="text-slate-700 hover:text-rose-500 transition-colors font-mono font-black text-[10px]">DEL</button>
                    </td>
                </tr>
            `).join('');
        }

        function updateCharts() {
            const c2 = state.landings.filter(l => l.cat === 'CAT-II').length;
            const c3 = state.landings.filter(l => l.cat === 'CAT-III').length;
            const s2 = document.getElementById('stat-cat2'); if(s2) s2.innerText = c2;
            const s3 = document.getElementById('stat-cat3'); if(s3) s3.innerText = c3;
            if(state.charts.cat2) { state.charts.cat2.data.datasets[0].data = [c2, Math.max(0, 100-c2)]; state.charts.cat2.update(); }
            if(state.charts.cat3) { state.charts.cat3.data.datasets[0].data = [c3, Math.max(0, 50-c3)]; state.charts.cat3.update(); }
        }

        window.switchTab = (id) => {
            ['intro', 'compliance', 'plan', 'data'].forEach(t => {
                const s = document.getElementById(`section-${t}`); if(s) s.classList.add('hidden');
                const n = document.getElementById(`nav-${t}`); if(n) n.className = 'tab-inactive py-2 font-bold uppercase tracking-tight';
            });
            const ts = document.getElementById(`section-${id}`); if(ts) ts.classList.remove('hidden');
            const tn = document.getElementById(`nav-${id}`); if(tn) tn.className = 'tab-active py-2 font-bold uppercase tracking-tight';
            state.currentTab = id; if (id === 'intro') initVisualizer();
        };

        window.exportToWord = () => {
            if (state.landings.length === 0) return alert("ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
            let rows = state.landings.map(i => `<tr><td>${i.date}</td><td>${i.airport}</td><td>${i.runway}</td><td>${i.type}</td><td>${i.reg}</td><td>${i.wx}</td><td>${i.capt}</td><td>${i.fo}</td><td>${i.cat}</td><td>${i.satisfy}</td></tr>`).join('');
            const content = `<html><head><meta charset='utf-8'><style>table{border-collapse:collapse;width:100%}th,td{border:1px solid #000;padding:6px;text-align:center;font-size:9pt;font-family:'Malgun Gothic'}</style></head><body><h2 style='text-align:center'>CAT II/III Landing Performance Ledger</h2><table><thead><tr><th bgcolor='#f2f2f2'>Date</th><th bgcolor='#f2f2f2'>APT</th><th bgcolor='#f2f2f2'>RWY</th><th bgcolor='#f2f2f2'>Type</th><th bgcolor='#f2f2f2'>Reg</th><th bgcolor='#f2f2f2'>WX</th><th bgcolor='#f2f2f2'>Capt</th><th bgcolor='#f2f2f2'>F.O</th><th bgcolor='#f2f2f2'>CAT</th><th bgcolor='#f2f2f2'>Status</th></tr></thead><tbody>${rows}</tbody></table></body></html>`;
            const blob = new Blob(['\ufeff', content], { type: 'application/msword' });
            const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = `CAT_Landing_Report_${new Date().toISOString().slice(0,10)}.doc`; link.click();
        };

        const setupUI = () => {
            const chartCfg = (c) => ({ type: 'doughnut', data: { datasets: [{ data: [0, 100], backgroundColor: [c, 'rgba(255,255,255,0.05)'], borderWidth: 0 }] }, options: { responsive: true, maintainAspectRatio: false, cutout: '88%', plugins: { legend: { display: false } } } });
            const ctx2 = document.getElementById('chart-cat2'); if(ctx2) state.charts.cat2 = new Chart(ctx2, chartCfg('#3b82f6'));
            const ctx3 = document.getElementById('chart-cat3'); if(ctx3) state.charts.cat3 = new Chart(ctx3, chartCfg('#6366f1'));
            const dcc = document.getElementById('doc-checklist-container'); if(dcc) dcc.innerHTML = DOCS.map(d => `<div class="flex items-center justify-between p-3 rounded-2xl border border-white/5 bg-white/5 transition-all hover:border-blue-500/50"><div><span class="text-[10px] font-bold text-white font-sans">${d.n}</span><div class="text-[8px] text-slate-500 font-mono uppercase tracking-widest">${d.d}</div></div><input type="checkbox" class="w-4 h-4 rounded bg-slate-800 border-white/10 text-blue-500 cursor-pointer"></div>`).join('');
        };

        let aniId;
        window.initVisualizer = () => {
            const cv = document.getElementById('landingCanvas'); if(!cv) return;
            const ctx = cv.getContext('2d'); cv.width = cv.parentElement.clientWidth; cv.height = cv.parentElement.clientHeight;
            function draw() {
                if(state.currentTab !== 'intro') return;
                ctx.clearRect(0,0,cv.width,cv.height); ctx.fillStyle = '#050505'; ctx.fillRect(0, cv.height/2, cv.width, cv.height/2);
                ctx.beginPath(); ctx.moveTo(cv.width/2-20, cv.height/2); ctx.lineTo(cv.width/2+380, cv.height); ctx.lineTo(cv.width/2-380, cv.height); ctx.closePath(); ctx.fillStyle = '#111'; ctx.fill();
                let f = state.visualMode === 1 ? 0.2 : (state.visualMode === 2 ? 0.65 : 0.96);
                const g = ctx.createLinearGradient(0,0,0,cv.height); g.addColorStop(0, `rgba(210,210,230,${f})`); g.addColorStop(1, `rgba(210,210,230,${f*0.4})`);
                ctx.fillStyle = g; ctx.fillRect(0,0,cv.width,cv.height); aniId = requestAnimationFrame(draw);
            }
            cancelAnimationFrame(aniId); draw();
        };
        window.setVisual = (m) => { state.visualMode = m; const el = document.getElementById('visualizer-status'); if(el) el.innerText = `CAT ${m===1?'I':m===2?'II':'III'} APPROACH (${m===1?'Normal':m===2?'Low Vis':'Critical Vis'})`; };

        setupUI(); initVisualizer();
        const di = document.getElementById('input-date'); if(di) di.valueAsDate = new Date();
    </script>
</body>
</html>
